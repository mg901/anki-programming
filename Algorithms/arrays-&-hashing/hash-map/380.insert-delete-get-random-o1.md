## [380 Insert Delete GetRandom O(1)](https://leetcode.com/problems/insert-delete-getrandom-o1/description)

<!-- notecardId: 1766851533400 -->

```js
// Explanation:
// - Neetcode: https://youtu.be/j4KwhBziOpg

// - Time: O(1)
// - Space: O(n)
class RandomizedSet {
  #valToIdx = new Map();

  #arr = [];

  insert(val) {
    if (this.#valToIdx.has(val)) return false;

    this.#valToIdx.set(val, this.#arr.length);
    this.#arr.push(val);

    return true;
  }

  remove(val) {
    if (!this.#valToIdx.has(val)) return false;

    const idx = this.#valToIdx.get(val);
    const lastVal = this.#arr.at(-1);

    if (val !== lastVal) {
      this.#arr[idx] = lastVal;
      this.#valToIdx.set(lastVal, idx);
    }

    this.#arr.pop();
    this.#valToIdx.delete(val);

    return true;
  }

  getRandom() {
    const n = this.#arr.length;
    const randomIdx = Math.floor(Math.random() * n);

    return this.#arr[randomIdx];
  }
}
```
