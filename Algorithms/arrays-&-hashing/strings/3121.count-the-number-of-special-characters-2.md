## [3121 Count the Number of Special Characters II](https://leetcode.com/problems/count-the-number-of-special-characters-ii/description/)

<!-- notecardId: 1768741524556 -->

```js
// - Time: O(n)
// - Space: O(1) = O(26)
function numberOfSpecialChars(word) {
  const lastLower = new Map();
  const firstUpper = new Map();

  for (let i = 0; i < word.length; i += 1) {
    const char = word[i];

    if (char >= 'a' && char <= 'z') {
      lastLower.set(char, i);
    }

    if (char >= 'A' && char <= 'Z') {
      if (!firstUpper.has(char)) {
        firstUpper.set(char, i);
      }
    }
  }

  let count = 0;

  for (const [char, index] of lastLower) {
    const upperChar = char.toUpperCase();

    if (firstUpper.has(upperChar)) {
      if (index < firstUpper.get(upperChar)) {
        count += 1;
      }
    }
  }

  return count;
}
```
