## [3121 Count the Number of Special Characters II](https://leetcode.com/problems/count-the-number-of-special-characters-ii/description/)

<!-- notecardId: 1768749997475 -->

```js
// - Time: O(n)
// - Space: O(1) = O(26)
function numberOfSpecialChars(word) {
  const lastLowerIdx = new Map();
  const firstUpperIdx = new Map();

  for (let i = 0; i < word.length; i += 1) {
    const char = word[i];

    if (char >= 'a' && char <= 'z') {
      lastLowerIdx.set(char, i);
    }

    if (char >= 'A' && char <= 'Z') {
      if (!firstUpperIdx.has(char)) {
        firstUpperIdx.set(char, i);
      }
    }
  }

  let count = 0;

  for (const [char, index] of lastLowerIdx) {
    const upperChar = char.toUpperCase();

    if (firstUpperIdx.has(upperChar)) {
      if (index < firstUpperIdx.get(upperChar)) {
        count += 1;
      }
    }
  }

  return count;
}
```
