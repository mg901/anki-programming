## [146 LRU Cache 'linked-list'](https://leetcode.com/problems/lru-cache/description/)

<!-- notecardId: 1744705797337 -->

```js
class ListNode {
  constructor(data, next = null, prev = null) {
    this.data = data;
    this.next = next;
    this.prev = prev;
  }
}

class LRUCache {
  #capacity;

  #keyNodeMap = new Map();

  #head = new ListNode({ key: null, val: null });

  #tail = new ListNode({ key: null, val: null });

  constructor(capacity) {
    this.#capacity = capacity;
    this.#head.next = this.#tail;
    this.#tail.prev = this.#head;
  }

  get(key) {
    const node = this.#keyNodeMap.get(key);
    if (!node) return -1;

    this.#remove(node);
    this.#prepend(node);

    return node.data.val;
  }

  put(key, val) {
    if (this.#keyNodeMap.has(key)) {
      const node = this.#keyNodeMap.get(key);
      this.#remove(node);

      node.data.val = val;
      this.#prepend(node);

      return;
    }

    if (this.#keyNodeMap.size === this.#capacity) {
      const lru = this.#tail.prev;
      this.#remove(lru);

      if (lru.data.key) {
        this.#keyNodeMap.delete(lru.data.key);
      }
    }

    const node = new ListNode({ key, val });
    this.#keyNodeMap.set(key, node);
    this.#prepend(node);
  }

  #remove(node) {
    node.prev.next = node.next;
    node.next.prev = node.prev;

    node.next = null;
    node.prev = null;
  }

  #prepend(node) {
    node.next = this.#head.next;
    node.prev = this.#head;

    this.#head.next.prev = node;
    this.#head.next = node;
  }
}
```
