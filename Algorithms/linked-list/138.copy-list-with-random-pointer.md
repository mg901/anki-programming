## [138 Copy List with Random Pointer](https://leetcode.com/problems/copy-list-with-random-pointer/description/)

<!-- notecardId: 1755202181062 -->

```js
// Explanation:
// - Neetcode: https://youtu.be/5Y2EiZST97Y

// Complexity:
// - Time: O(n)
// - Space: (n)
function copyRandomList(head) {
  if (!head) return head;

  const nodeCloneMap = new Map();
  let current = head;

  while (current) {
    nodeCloneMap.set(current, new Node(current.val));
    current = current.next;
  }

  current = head;

  while (current) {
    const clone = nodeCloneMap.get(current);
    clone.next = nodeCloneMap.get(current.next) ?? null;
    clone.random = nodeCloneMap.get(current.random) ?? null;

    current = current.next;
  }

  return nodeCloneMap.get(head);
}

// Complexity:
// - Time: O(n)
// - Space: (n)
function copyRandomList(head) {
  if (!head) return head;

  const nodeCloneMap = new Map();
  return dfs(head);

  function dfs(node) {
    if (!node) return null;

    if (nodeCloneMap.has(node)) {
      return nodeCloneMap.get(node);
    }

    const clone = new Node(node.val);
    nodeCloneMap.set(node, clone);

    clone.next = dfs(node.next);
    clone.random = dfs(node.random);

    return clone;
  }
}
```
