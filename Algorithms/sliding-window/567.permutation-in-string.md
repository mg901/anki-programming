## [567 Permutation in String](https://leetcode.com/problems/permutation-in-string/description/)

<!-- notecardId: 1741597663142 -->

```js
function checkInclusion(s1, s2) {
  if (s1.length > s2.length) return false;

  const ALPHABET_SIZE = 26;
  const s1Freq = new Array(ALPHABET_SIZE).fill(0);
  const s2Freq = new Array(ALPHABET_SIZE).fill(0);
  const base = "a".codePointAt(0);

  let matches = 0;

  for (let i = 0; i < s1.length; i += 1) {
    s1Freq[s1.codePointAt(i) - base] += 1;
    s2Freq[s2.codePointAt(i) - base] += 1;
  }

  for (let i = 0; i < ALPHABET_SIZE; i += 1) {
    if (s1Freq[i] === s2Freq[i]) matches += 1;
  }

  for (let i = s1.length; i < s2.length; i += 1) {
    if (matches === ALPHABET_SIZE) return true;

    const rightIndex = s2.codePointAt(i) - base;
    const leftIndex = s2.codePointAt(i - s1.length) - base;

    if (s1Freq[rightIndex] === s2Freq[rightIndex]) matches -= 1;
    s2Freq[rightIndex] += 1;
    if (s1Freq[rightIndex] === s2Freq[rightIndex]) matches += 1;

    if (s1Freq[leftIndex] === s2Freq[leftIndex]) matches -= 1;
    s2Freq[leftIndex] -= 1;
    if (s1Freq[leftIndex] === s2Freq[leftIndex]) matches += 1;
  }

  return matches === ALPHABET_SIZE;
}
```
