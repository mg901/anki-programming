## [36 Valid Sudoku 'bit-mask'](https://leetcode.com/problems/valid-sudoku/description/)

<!-- notecardId: 1764184848529 -->

```js
// Explanation:
// - Neetcode: https://youtu.be/TjFXEUCMqI8

// - Time: O(n^2)
// - Space: O(n)
function isValidSudoku(board) {
  const BOARD_SIZE = 9;
  const SUB_BOARD_SIZE = 3;
  const rowMasks = new Uint16Array(BOARD_SIZE);
  const colMasks = new Uint16Array(BOARD_SIZE);
  const subBoardMasks = new Uint16Array(BOARD_SIZE);

  for (let r = 0; r < BOARD_SIZE; r += 1) {
    for (let c = 0; c < BOARD_SIZE; c += 1) {
      const value = board[r][c];
      if (value === '.') continue;

      const index = value - 1;
      const bit = 1 << index;

      const subBoardIndex =
        ((r / SUB_BOARD_SIZE) ^ 0) * SUB_BOARD_SIZE +
        ((c / SUB_BOARD_SIZE) ^ 0);

      if (
        rowMasks[r] & bit ||
        colMasks[c] & bit ||
        subBoardMasks[subBoardIndex] & bit
      ) {
        return false;
      }

      rowMasks[r] |= bit;
      colMasks[c] |= bit;
      subBoardMasks[subBoardIndex] |= bit;
    }
  }

  return true;
}
```
