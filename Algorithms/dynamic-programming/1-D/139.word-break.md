## [139 Word Break](https://leetcode.com/problems/word-break/description/)

<!-- notecardId: 1754251713357 -->

```js
// Sub-pattern:
// - Partition

// Top-down

// Without memo:
// - Time: O(k^n)
//   k = average valid words per position
// - Space: O(n) recursion stack
//
// With memo:
// - Time: O(n * w * m),
//   n = length of str,
//   w = number of words in wordDict,
//   m = max length of a word in wordDict
// - Space: O(n) for memo cache and recursion stack
function wordBreak(str, wordDict) {
  const n = str.length;
  const cache = new Array(n);

  return dfs(0);

  function dfs(index) {
    if (index === n) return true;
    if (cache[index] !== undefined) return cache[index];

    for (const word of wordDict) {
      if (str.startsWith(word, index) && dfs(index + word.length)) {
        cache[index] = true;

        return true;
      }
    }

    cache[index] = false;

    return false;
  }
}

// Bottom-up
// - Time: O(n * w * m)
//   w = wordDict.length
//   m = maximum length of any word in wordDict
// - Space: O(n)
function wordBreak(s, wordDict) {
  const n = s.length;
  const dp = new Uint8Array(n + 1);
  dp[0] = 1;

  for (let i = 1; i <= n; i += 1) {
    for (const word of wordDict) {
      const start = i - word.length;

      if (start < 0) continue;
      if (dp[start] === 0) continue;
      if (s.slice(start, i) !== word) continue;

      dp[i] = 1;
      break;
    }
  }

  return Boolean(dp[n]);
}
```
