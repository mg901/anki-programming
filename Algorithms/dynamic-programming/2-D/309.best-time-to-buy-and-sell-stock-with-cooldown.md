## [309 Best Time to Buy and Sell Stock with Cooldown](https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/description/)

<!-- notecardId: 1753904250541 -->

```js
// Explanation: https://youtu.be/-OxZTJtn8Vs?si=ZSeCeLAxQa7Y0TU2

// Bottom-up
// - Time: O(n)
// - Space: O(n)
function maxProfit(prices) {
  const n = prices.length;
  const dp = Array.from({ length: 3 }, () => new Int32Array(n));

  dp[0][0] = 0; // sold: profit after selling on day 0 (not possible, stays 0)
  dp[1][0] = -prices[0]; // held: bought on day 0
  dp[2][0] = 0; // rest: did nothing on day 0

  for (let i = 1; i < n; i += 1) {
    dp[0][i] = dp[1][i - 1] + prices[i]; // sell today
    dp[1][i] = Math.max(dp[1][i - 1], dp[2][i - 1] - prices[i]); // hold or buy today
    dp[2][i] = Math.max(dp[2][i - 1], dp[0][i - 1]);
  }

  return Math.max(dp[0][n - 1], dp[2][n - 1]);
}

// Space Optimized
// - Time: O(n)
// - Space: O(1)
function maxProfit(prices) {
  const n = prices.length;
  if (n === 0) return 0;

  let sold = 0;
  let held = -prices[0];
  let rest = 0;

  for (let i = 1; i < n; i += 1) {
    const prevHold = held;
    const prevSold = sold;
    const prevRest = rest;

    sold = prevHold + prices[i];
    held = Math.max(prevHold, prevRest - prices[i]);
    rest = Math.max(prevRest, prevSold);
  }

  return Math.max(sold, rest);
}
```
