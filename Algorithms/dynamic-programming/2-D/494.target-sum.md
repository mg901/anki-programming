## [494 Target Sum](https://leetcode.com/problems/target-sum/description/)

<!-- notecardId: 1754859500444 -->

```js
// Explanation:
// - Neetcode: https://youtu.be/dwMOrl85Xes

// Top-down
//
// Without memo:
// - Time: O(2^n)
// - Space: O(n)
//
// With memo:
// - Time: O(n * sum)
// - Space: O(n * sum)
function findTargetSumWays(nums, target) {
  const memo = new Map();
  const total = nums.reduce((acc, item) => acc + item, 0);

  if (Math.abs(target) > total) return 0;

  return dfs(0, 0);

  function dfs(i, sum) {
    const key = `${i},${sum}`;
    if (memo.has(key)) return memo.get(key);

    if (i === nums.length) {
      return sum === target ? 1 : 0;
    }

    const result = dfs(i + 1, sum - nums[i]) + dfs(i + 1, sum + nums[i]);
    memo.set(key, result);

    return result;
  }
}

// Bottom-up
// - Time: O(n * total)
// - Space: O(n * total)
function findTargetSumWays(nums, target) {
  const total = nums.reduce((a, b) => a + b, 0);

  if (Math.abs(target) > total) return 0;

  const offset = total;
  const n = nums.length;

  const dp = Array.from(
    { length: n + 1 },
    () => new Uint32Array(2 * total + 1),
  );

  dp[0][offset] = 1;

  for (let i = 1; i <= n; i += 1) {
    for (let sum = -total; sum <= total; sum += 1) {
      const count = dp[i - 1][sum + offset];

      if (count === 0) continue;
      const num = nums[i - 1];

      dp[i][sum + num + offset] += count;
      dp[i][sum - num + offset] += count;
    }
  }

  return dp[n][target + offset];
}

// One Row
// - Time: O(n * total)
// - Space: O(total)
function findTargetSumWays(nums, target) {
  const total = nums.reduce((a, b) => a + b, 0);

  if (Math.abs(target) > total) return 0;

  const offset = total;
  let dp = new Uint32Array(2 * total + 1);
  dp[offset] = 1;

  for (const num of nums) {
    const nextDp = new Uint32Array(2 * total + 1);

    for (let sum = -total; sum <= total; sum += 1) {
      const count = dp[sum + offset];

      if (count === 0) continue;

      nextDp[sum + num + offset] += count;
      nextDp[sum - num + offset] += count;
    }

    dp = nextDp;
  }

  return dp[target + offset];
}

// Space Optimized
// - Time: O(n * sum)
// - Space: O(sum)
function findTargetSumWays(nums, target) {
  const dp = new Map();
  dp.set(0, 1);

  for (const num of nums) {
    const next = new Map();

    for (const [sum, count] of dp.entries()) {
      next.set(sum + num, (next.get(sum + num) ?? 0) + count);
      next.set(sum - num, (next.get(sum - num) ?? 0) + count);
    }

    dp = next;
  }

  return dp.get(target) ?? 0;
}
```
