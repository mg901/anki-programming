## [981 Time Based Key-Value Store](https://leetcode.com/problems/time-based-key-value-store/description/)

<!-- notecardId: 1759516770444 -->

```js
// Explanation:
// - Neetcode: https://youtu.be/fu2cD_6E8Hw
class TimeMap {
  #store = new Map();

  // - Time: O(1)
  // - Space: O(1)
  set(key, value, timestamp) {
    if (!this.#store.has(key)) {
      this.#store.set(key, []);
    }

    this.#store.get(key).push({
      value,
      timestamp,
    });
  }

  // - Time: O(log(n))
  // - Space: O(1)
  get(key, timestamp) {
    if (!this.#store.has(key)) return '';

    const values = this.#store.get(key);
    let left = 0;
    let right = values.length - 1;

    while (left <= right) {
      const mid = left + ((right - left) >> 1);
      const value = values[mid].timestamp;

      if (value <= timestamp) {
        left = mid + 1;
      } else {
        right = mid - 1;
      }
    }

    return right >= 0 ? values[right].value : '';
  }
}
```
