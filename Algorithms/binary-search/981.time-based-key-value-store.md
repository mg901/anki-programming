## [981 Time Based Key-Value Store](https://leetcode.com/problems/time-based-key-value-store/description/)

<!-- notecardId: 1741789092652 -->

```js
class TimeMap {
  #map = new Map();

  set(key, value, timestamp) {
    if (!this.#map.has(key)) {
      this.#map.set(key, []);
    }

    this.#map.get(key).push({
      value,
      timestamp,
    });
  }

  get(key, timestamp) {
    if (!this.#map.has(key)) return "";

    const values = this.#map.get(key);
    let left = 0;
    let right = values.length - 1;

    while (left <= right) {
      const mid = left + ((right - left) >> 1);

      if (values[mid].timestamp <= timestamp) {
        left = mid + 1;
      } else {
        right = mid - 1;
      }
    }

    return right >= 0 ? values[right].value : "";
  }
}
```
